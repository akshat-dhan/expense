<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Backpack Optimizer - Smart Campus Budgeting Platform</title>
    <style>
        :root {
            --primary-blue: #007AFF;
            --primary-purple: #5856D6;
            --success-green: #34C759;
            --danger-red: #FF3B30;
            --warning-orange: #FF9500;
            --info-cyan: #5AC8FA;
            --system-gray: #8E8E93;
            --system-gray4: #D1D1D6;
            --system-gray5: #E5E5EA;
            --system-gray6: #F2F2F7;
            --surface: #FFFFFF;
            --text-primary: #1C1C1E;
            --text-secondary: #3A3A3C;
            --border-radius: 16px;
            --shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
            --gradient-primary: linear-gradient(135deg, var(--primary-blue), var(--primary-purple));
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Inter', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            color: var(--text-primary);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow-x: hidden;
        }

        /* Animated Background Elements */
        .bg-shapes {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            z-index: 0;
        }

        .shape {
            position: absolute;
            opacity: 0.1;
            animation: float 6s ease-in-out infinite;
        }

        .shape:nth-child(1) {
            top: 10%;
            left: 10%;
            width: 80px;
            height: 80px;
            background: var(--primary-blue);
            border-radius: 50%;
            animation-delay: 0s;
        }

        .shape:nth-child(2) {
            top: 20%;
            right: 10%;
            width: 60px;
            height: 60px;
            background: var(--success-green);
            border-radius: 20px;
            animation-delay: 1s;
        }

        .shape:nth-child(3) {
            bottom: 20%;
            left: 15%;
            width: 100px;
            height: 100px;
            background: var(--warning-orange);
            border-radius: 30px;
            animation-delay: 2s;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(10deg); }
        }

        .auth-container {
            max-width: 520px;
            width: 90%;
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(30px);
            border-radius: 24px;
            padding: 50px;
            box-shadow: 0 25px 70px rgba(0, 0, 0, 0.3);
            text-align: center;
            position: relative;
            z-index: 10;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .auth-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--gradient-primary);
            border-radius: 24px 24px 0 0;
        }

        .auth-title {
            font-size: 2.8rem;
            font-weight: 900;
            margin-bottom: 16px;
            color: var(--text-primary);
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .auth-subtitle {
            font-size: 1.2rem;
            color: var(--system-gray);
            margin-bottom: 40px;
            font-style: italic;
            line-height: 1.5;
        }

        .form-group {
            margin-bottom: 28px;
            text-align: left;
        }

        .form-label {
            display: block;
            font-weight: 700;
            margin-bottom: 10px;
            color: var(--text-primary);
            font-size: 16px;
        }

        .form-control {
            width: 100%;
            padding: 18px 20px;
            border: 2px solid var(--system-gray4);
            border-radius: var(--border-radius);
            font-size: 16px;
            background: var(--surface);
            transition: var(--transition);
            font-family: inherit;
            font-weight: 500;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary-blue);
            box-shadow: 0 0 0 4px rgba(0, 122, 255, 0.1);
            transform: translateY(-2px);
        }

        .btn {
            background: var(--gradient-primary);
            color: white;
            border: none;
            padding: 18px 35px;
            border-radius: var(--border-radius);
            font-size: 18px;
            font-weight: 800;
            cursor: pointer;
            width: 100%;
            margin-bottom: 30px;
            transition: var(--transition);
            text-transform: uppercase;
            letter-spacing: 1px;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 35px rgba(0, 122, 255, 0.4);
        }

        /* Campus Information */
        .campus-info {
            background: linear-gradient(135deg, #E8F5FF, #F0F9FF);
            border: 2px solid var(--info-cyan);
            border-radius: 16px;
            padding: 20px;
            margin-top: 20px;
            text-align: center;
        }

        .campus-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 12px;
            margin-top: 15px;
        }

        .campus-item {
            background: white;
            padding: 12px 8px;
            border-radius: 12px;
            font-weight: 600;
            font-size: 13px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            transition: var(--transition);
            cursor: pointer;
        }

        .campus-item:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        }

        .flash-message {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--surface);
            border-radius: var(--border-radius);
            padding: 20px 25px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.2);
            border-left: 5px solid var(--success-green);
            z-index: 2000;
            font-weight: 600;
            max-width: 400px;
            animation: slideIn 0.3s ease;
        }

        .flash-error {
            border-left-color: var(--danger-red);
        }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        /* Professional Footer */
        .login-footer {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            text-align: center;
            color: rgba(255, 255, 255, 0.8);
            font-size: 14px;
            z-index: 5;
        }

        .developer-credit {
            background: linear-gradient(135deg, #FFD700, #FFA500);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: 700;
            text-shadow: none;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .auth-container {
                margin: 20px;
                padding: 30px 25px;
            }

            .auth-title {
                font-size: 2.2rem;
            }

            .campus-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .login-footer {
                position: relative;
                bottom: auto;
                left: auto;
                transform: none;
                margin-top: 30px;
                padding: 20px;
            }
        }

        @media (max-width: 480px) {
            .campus-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Animated Background -->
    <div class="bg-shapes">
        <div class="shape"></div>
        <div class="shape"></div>
        <div class="shape"></div>
    </div>

    <div class="auth-container">
        <h1 class="auth-title">Welcome Back! 👋</h1>
        <p class="auth-subtitle">"The best investment you can make is in yourself" - Warren Buffett</p>
        
        <form id="loginForm" onsubmit="handleLogin(event)">
            <div class="form-group">
                <label class="form-label" for="username">👤 Username</label>
                <input type="text" class="form-control" id="username" placeholder="Enter your username" required>
            </div>
            
            <div class="form-group">
                <label class="form-label" for="password">🔒 Password</label>
                <input type="password" class="form-control" id="password" placeholder="Enter your password" required>
            </div>
            
            <button type="submit" class="btn">🚀 Sign In</button>
        </form>
        
        <p style="color: var(--system-gray); margin-bottom: 16px;">
            Don't have an account?
        </p>
        <a href="register.html" style="color: var(--primary-blue); text-decoration: none; font-weight: 600; font-size: 18px;">
            Create your account ✨
        </a>

        <!-- Campus Information -->
        <div class="campus-info">
            <p style="font-weight: 700; color: var(--info-cyan); margin-bottom: 15px;">🏫 Supported Campuses</p>
            <div class="campus-grid">
                <div class="campus-item">🌟 Christ BLR</div>
                <div class="campus-item">🎯 DU Delhi</div>
                <div class="campus-item">⚡ VIT Vellore</div>
                <div class="campus-item">💎 BITS Pilani</div>
                <div class="campus-item">🚀 IIT Bombay</div>
                <div class="campus-item">🔬 IIT Delhi</div>
            </div>
            <p style="font-size: 12px; color: var(--system-gray); margin-top: 15px;">
                Campus-specific marketplace, housing, and financial insights
            </p>
        </div>
    </div>

    <!-- Login Footer -->
    <div class="login-footer">
        <p>&copy; 2025 Backpack Optimizer. Smart budgeting for Indian students.</p>
        <p class="developer-credit">
            Developed by Akshat Maheshwari (2343104) - Christ University BCA
        </p>
    </div>

    <script>
        // ✅ CLEAN USER MANAGEMENT - NO PREDEFINED DATA
        let users = JSON.parse(localStorage.getItem('backpack_users') || '[]');
        
        // ✅ NO HARDCODED SAMPLE USERS - START WITH EMPTY ARRAY
        console.log('👥 Total registered users:', users.length);

        function handleLogin(event) {
            event.preventDefault();
            const username = document.getElementById('username').value.trim().toLowerCase();
            const password = document.getElementById('password').value;
            
            if (!username || !password) {
                showFlashMessage('❌ Please enter both username and password.', 'error');
                return;
            }

            // ✅ AUTHENTICATE ONLY REGISTERED USERS - NO PREDEFINED ACCOUNTS
            const user = users.find(u => u.username === username && u.password === password);
            
            if (user) {
                // ✅ Store ACTUAL user data (including their real roll number)
                localStorage.setItem('currentUser', JSON.stringify(user));
                
                // ✅ Welcome message with REAL user data
                const welcomeMsg = `🎉 Welcome back, ${user.fullName}! Your roll number ${user.regNumber} is verified.`;
                showFlashMessage(welcomeMsg);
                
                // ✅ Initialize clean data structures for user
                initializeUserData(user.id);
                
                setTimeout(() => {
                    window.location.href = 'dashboard.html';
                }, 1500);
                
            } else {
                showFlashMessage('❌ Invalid credentials. Please register first if you don\'t have an account.', 'error');
                
                // Suggest registration after failed login
                setTimeout(() => {
                    showFlashMessage('💡 New user? Click "Create your account" below to register! ✨', 'info');
                }, 2500);
            }
        }

        // ✅ INITIALIZE CLEAN USER DATA - NO PREDEFINED CONTENT
        function initializeUserData(userId) {
            // Initialize empty arrays for user data
            const expenses = JSON.parse(localStorage.getItem('backpack_expenses') || '[]');
            const wishlist = JSON.parse(localStorage.getItem('backpack_wishlist') || '[]');
            const marketplace = JSON.parse(localStorage.getItem('backpack_marketplace') || '[]');
            const housing = JSON.parse(localStorage.getItem('backpack_housing') || '[]');
            
            // Only initialize if arrays don't exist yet - NO sample data added
            if (!localStorage.getItem('backpack_expenses')) {
                localStorage.setItem('backpack_expenses', JSON.stringify([]));
            }
            if (!localStorage.getItem('backpack_wishlist')) {
                localStorage.setItem('backpack_wishlist', JSON.stringify([]));
            }
            if (!localStorage.getItem('backpack_marketplace')) {
                localStorage.setItem('backpack_marketplace', JSON.stringify([]));
            }
            if (!localStorage.getItem('backpack_housing')) {
                localStorage.setItem('backpack_housing', JSON.stringify([]));
            }
            
            console.log('✅ Clean data structures initialized for user:', userId);
        }

        function showFlashMessage(message, type = 'success') {
            // Remove existing flash message
            const existingFlash = document.querySelector('.flash-message');
            if (existingFlash) {
                existingFlash.remove();
            }

            const flash = document.createElement('div');
            flash.className = 'flash-message';
            if (type === 'error') flash.classList.add('flash-error');
            
            flash.innerHTML = `
                <div style="display: flex; align-items: center; gap: 10px;">
                    <span>${message}</span>
                    <span onclick="this.parentElement.parentElement.remove()" 
                          style="cursor:pointer;font-size:18px;font-weight:bold;margin-left:auto;">&times;</span>
                </div>
            `;
            
            document.body.appendChild(flash);
            
            setTimeout(() => {
                if (flash.parentNode) {
                    flash.style.animation = 'slideOut 0.3s ease forwards';
                    setTimeout(() => flash.remove(), 300);
                }
            }, type === 'error' ? 8000 : 6000);
        }

        // Enhanced UX features
        document.addEventListener('DOMContentLoaded', function() {
            // Auto-focus username field
            document.getElementById('username').focus();
            
            // Add enter key support for password field
            document.getElementById('password').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    handleLogin(e);
                }
            });

            // Auto-lowercase username input
            document.getElementById('username').addEventListener('input', function() {
                this.value = this.value.toLowerCase().trim();
            });

            console.log('🎒 Backpack Optimizer - Login System Ready');
            console.log('✅ Fixed: No hardcoded roll numbers');
            console.log('✅ Fixed: No predefined user data');
            console.log('✅ Fixed: Clean start for all modules');
            console.log('✅ Ready for real user registration and authentication');
        });

        // Add CSS for slideOut animation
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideOut {
                from {
                    transform: translateX(0);
                    opacity: 1;
                }
                to {
                    transform: translateX(100%);
                    opacity: 0;
                }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>
